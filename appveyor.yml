platform:
  - x86

cache:
  - node_modules
  - src/bower-lib
  - '%APPDATA%\npm-cache'

install:
  - ps: Install-Product node 5.12.0
  - git submodule update --init --recursive
  - choco install -y InnoSetup
  - set PATH="C:\Program Files (x86)\Inno Setup 5";%PATH%
  - npm install -g gulp bower node-pre-gyp nw-gyp

build_script:
  - bower i
  - SET CL=-DDELAYIMP_INSECURE_WRITABLE_HOOKS
  - npm i
  - npm run client-build-win

artifacts:
  - path: build\client\prod\build\Setup.exe
  - path: build\client\prod\build\win32-package.tar.gz
